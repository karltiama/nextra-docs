# Communicating With Server
## Rendering a collection, modules

I've done this multiple times, but say we have a array or an object. And we want to display it or something. The course talks over
how to parse thru that using map and how the key attribute should not be array indexes, because it will cuase errors in the long run.

https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318

Starting with the following App.js file:

```js
const App = (props) => {
  const { notes } = props

  return (
    <div>
      <h1>Notes</h1>
      <ul>
        <li>{notes[0].content}</li>
        <li>{notes[1].content}</li>
        <li>{notes[2].content}</li>
      </ul>
    </div>
  )
}

export default App
```

The index.js file is as follows:

```js
import React from 'react'
import ReactDOM from 'react-dom/client'

import App from './App'

const notes = [
  {
    id: 1,
    content: 'HTML is easy',
    important: true
  },
  {
    id: 2,
    content: 'Browser can execute only JavaScript',
    important: false
  },
  {
    id: 3,
    content: 'GET and POST are the most important methods of HTTP protocol',
    important: true
  }
]

ReactDOM.createRoot(document.getElementById('root')).render(
  <App notes={notes} />
)
```

Every note contains a boolean value marking weather the note has been categorized as important or not,
and also a unique id.

Currently a single note is rendered by accessing the objects in the array and indexing a hard-coded
number. This isnt practical and can be improved by using the map function

```js
notes.map(note => <li>{note.content}</li>)
```

Which can be then placed inside a ul tag

```js
const App = (props) => {
  const { notes } = props

  return (
    <div>
      <h1>Notes</h1>
      <ul>
        {notes.map(note => <li>{note.content}</li>)}
      </ul>
    </div>
  )
}
```

At this point try running the code and you get an error.


### Key attribute

Each note created must also contain a unique key value. Adding the key below:

```js
const App = (props) => {
  const { notes } = props

  return (
    <div>
      <h1>Notes</h1>
      <ul>
        {notes.map(note => 
          <li key={note.id}>
            {note.content}
          </li>
        )}
      </ul>
    </div>
  )
}
```

In your own words, try to explain what is going on.

Here is our App.js file in which we are taking in some props from the object notes.
Returning div incapsulating a h1, and an unordered list.
The unordered list is taking each exisitng notes, maping over each individual one.
And returning a li element with the note.id and note.content for each one.



## Map

This Generates an error as well in the console, do to the next topic.

## Anti-pattern: Array Indexes as Keys

```js
<ul>
  {notes.map((note, i) => 
    <li key={i}>
      {note.content}
    </li>
  )}
</ul>
```
Generating a value of an index where the note resides is not good practice and can create undesired problems.


Interesting side note that I read in the article linked, stated that the correct practice is to reach for a existing
stable ID inside your list item. So it does have errors durring the render period in react.
[Medium](https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318)

## Refactoring Modules

```js
const Note = ({ note }) => {
  return (
    <li>{note.content}</li>
  )
}

const App = ({ notes }) => {
  return (
    <div>
      <h1>Notes</h1>
      <ul>
        {notes.map(note => 
          <Note key={note.id} note={note} />
        )}
      </ul>
    </div>
  )
}
```

Here we are using destructuring again and we are and now we have a seperate display of a single note in its own component.
A whole React application can be written in a single file. Although it is not very practical.

Common practice is to declare each component in its own file as an ES6-modules.

In smaller applications, components are used placed in a director called components, which is turn placed within the src 

Then we proceed towards creating the Note component in its own component.

Exisiting Code on can be found on Github.

We will create a directory called components for our application and place a file named Note.js inside, its contents is as follows

```js
const Note = ({ note }) => {
  return (
    <li>{note.content}</li>
  )
}

export default Note
```

The last line of the module exports the declared module, the variable Note.

Now the file that is using the component - App.js - can import the module:

```js
import Note from './components/Note'

const App = ({ notes }) => {
  // ...
}
```

The component exported by the module is now available for use in the variable Note, just as it was earlier.

When importing our own components, their location must be given in relation to the importing file

### Exercise 2.1 - 2.5

